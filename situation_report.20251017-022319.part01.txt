XSArena Single-File Situation Report
Generated (UTC): 2025-10-17 02:23:19
Python: 3.13.7  Platform: Linux-6.17.2-zen1-1-zen-x86_64-with-glibc2.42
CWD: /home/mativiters/1/xsarena
Args: {'dirs': ['books', 'recipes', 'directives', '.xsarena/jobs', 'review', 'src/xsarena'], 'max_inline': 1000, 'include_ephemeral': False, 'chunk_bytes': 122880, 'footer': 'Answer received. Do nothing else', 'update_rules': False}
Redaction: secrets/emails/IPs/URLs/long tokens are masked.

=== Executive Summary ===
XSArena is a bridge-first CLI studio for dense, long-form content (books, study manuals).
This report includes tree/LS, rules digest, config/session, recipes, book samples, review signals, jobs summary, and a code manifest.
Git branch: feat/cockpit-v3-restore
Git HEAD: b4828a92cf26086c6e657343363d4f65365e87a3
Git status: 88 change(s)

===== TREE books =====
└── books
===== END TREE books =====

===== TREE recipes =====
└── recipes
    ├── america-political-history.yml
    ├── arche_professor.yml
    ├── britain-political-history.yml
    ├── clinical.en.yml
    ├── fast_anchors-next-smoke.yml
    ├── fast_psychology-foundations-to-master-s-clinical-focus.yml
    ├── mastery.yml
    ├── mixer_modern-political-history-of-britain-elections-and-power-c-1832-present.yml
    ├── mixer_quick-test.yml
    ├── mixer_test-subject.yml
    ├── psychology_masters_clinical.yml
    └── role_launcher.yml
===== END TREE recipes =====

===== TREE directives =====
└── directives
    ├── _mixer
    ├── _preview
    ├── _rules
    ├── arche_professor.bilingual_en-fa.md
    ├── arche_professor.en.md
    ├── arche_professor.json.md
    ├── profiles
    ├── prompt.strip.json.md
    ├── quickref
    ├── role_launcher.md
    ├── role_quickref.md
    ├── roles
    ├── style.compressed_en.md
    ├── style.kasravi_oliver.bilingual_en-fa.md
    └── style.kasravi_oliver.en.md
===== END TREE directives =====

===== TREE .xsarena/jobs =====
└── .xsarena
    └── jobs
        ├── e950494e-ac6f-4527-90c3-fce29c4ab582
        ├── ec1000e3-3f39-46ed-9dd6-4cb317f057da
        └── eceedd66-d05d-4aae-9ac8-92a8fa4a24e4
===== END TREE .xsarena/jobs =====

===== TREE review =====
└── review
    └── important_files.list
===== END TREE review =====

===== TREE src/xsarena =====
└── src
    └── xsarena
        ├── __init__.py
        ├── __main__.py
        ├── __pycache__
        ├── bridge_v2
        ├── cli
        ├── coder
        ├── core
        ├── modes
        ├── router
        └── utils
===== END TREE src/xsarena =====

===== LS (books) =====
===== END LS (books) =====

===== LS (recipes) =====
recipes/america-political-history.yml
recipes/arche_professor.yml
recipes/britain-political-history.yml
recipes/clinical.en.yml
recipes/fast_anchors-next-smoke.yml
recipes/fast_psychology-foundations-to-master-s-clinical-focus.yml
recipes/mastery.yml
recipes/mixer_modern-political-history-of-britain-elections-and-power-c-1832-present.yml
recipes/mixer_quick-test.yml
recipes/mixer_test-subject.yml
recipes/psychology_masters_clinical.yml
recipes/role_launcher.yml
===== END LS (recipes) =====

===== LS (directives) =====
directives/_mixer/modern-political-history-of-britain-elections-and-power-c-1832-present.prompt.md
directives/_mixer/quick-test.prompt.md
directives/_mixer/test-subject.prompt.md
directives/_preview/quick-test.preview.md
directives/_preview/quick-test.prompt.md
directives/_preview/test-preview-subject.preview.md
directives/_preview/test-preview-subject.prompt.md
directives/_preview/your-topic.prompt.md
directives/_rules/rules.merged.md
directives/_rules/sources/CLI_AGENT_RULES.md
directives/_rules/sources/ORDERS_LOG.md
directives/arche_professor.bilingual_en-fa.md
directives/arche_professor.en.md
directives/arche_professor.json.md
directives/profiles/snark.hot.md
directives/profiles/snark.medium.md
directives/profiles/snark.mild.md
directives/prompt.strip.json.md
directives/quickref/agent_quickref.bilingual.md
directives/quickref/agent_quickref.compressed.md
directives/quickref/agent_quickref.md
directives/role_launcher.md
directives/role_quickref.md
directives/roles/role.glossary_surgeon.md
directives/roles/role.narrative_editor.md
directives/roles/role.policy_drafter.md
directives/roles/role.red_team.md
directives/roles/role.risk_officer.md
directives/roles/role.socratic.md
directives/roles/role.steelman.md
directives/style.compressed_en.md
directives/style.kasravi_oliver.bilingual_en-fa.md
directives/style.kasravi_oliver.en.md
===== END LS (directives) =====

===== LS (.xsarena/jobs) =====
.xsarena/jobs/e950494e-ac6f-4527-90c3-fce29c4ab582/events.jsonl
.xsarena/jobs/e950494e-ac6f-4527-90c3-fce29c4ab582/job.json
.xsarena/jobs/ec1000e3-3f39-46ed-9dd6-4cb317f057da/events.jsonl
.xsarena/jobs/ec1000e3-3f39-46ed-9dd6-4cb317f057da/job.json
.xsarena/jobs/eceedd66-d05d-4aae-9ac8-92a8fa4a24e4/events.jsonl
.xsarena/jobs/eceedd66-d05d-4aae-9ac8-92a8fa4a24e4/job.json
===== END LS (.xsarena/jobs) =====

===== LS (review) =====
review/important_files.list
===== END LS (review) =====

===== LS (src/xsarena) =====
src/xsarena/__init__.py
src/xsarena/__main__.py
src/xsarena/__pycache__/__init__.cpython-313.pyc
src/xsarena/__pycache__/__main__.cpython-313.pyc
src/xsarena/bridge_v2/__init__.py
src/xsarena/bridge_v2/__pycache__/__init__.cpython-313.pyc
src/xsarena/bridge_v2/__pycache__/api_server.cpython-313.pyc
src/xsarena/bridge_v2/api_server.py
src/xsarena/cli/__init__.py
src/xsarena/cli/__pycache__/__init__.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_adapt.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_agent.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_audio.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_backend.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_bilingual.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_book.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_booster.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_boot.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_chad.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_checklist.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_clean.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_coach.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_coder.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_config.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_continue.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_control.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_controls.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_debug.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_deprecated.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_doctor.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_fast.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_fix.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_ingest.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_interactive.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_jobs.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_joy.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_lossless.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_macros.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_metrics.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_mixer.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_modes.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_people.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_pipeline.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_plan.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_playground.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_policy.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_preview.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_profiles.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_project.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_prompt.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_publish.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_quick.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_report.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_run.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_snapshot.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_study.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_style.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_tools.cpython-313.pyc
src/xsarena/cli/__pycache__/cmds_upgrade.cpython-313.pyc
src/xsarena/cli/__pycache__/context.cpython-313.pyc
src/xsarena/cli/__pycache__/interactive_session.cpython-313.pyc
src/xsarena/cli/__pycache__/main.cpython-313.pyc
src/xsarena/cli/__pycache__/service.cpython-313.pyc
src/xsarena/cli/cmds_adapt.py
src/xsarena/cli/cmds_agent.py
src/xsarena/cli/cmds_audio.py
src/xsarena/cli/cmds_backend.py
src/xsarena/cli/cmds_bilingual.py
src/xsarena/cli/cmds_book.py
src/xsarena/cli/cmds_booster.py
src/xsarena/cli/cmds_boot.py
src/xsarena/cli/cmds_chad.py
src/xsarena/cli/cmds_checklist.py
src/xsarena/cli/cmds_clean.py
src/xsarena/cli/cmds_coach.py
src/xsarena/cli/cmds_coder.py
src/xsarena/cli/cmds_config.py
src/xsarena/cli/cmds_control.py
src/xsarena/cli/cmds_controls.py
src/xsarena/cli/cmds_debug.py
src/xsarena/cli/cmds_deprecated.py
src/xsarena/cli/cmds_doctor.py
src/xsarena/cli/cmds_fix.py
src/xsarena/cli/cmds_ingest.py
src/xsarena/cli/cmds_interactive.py
src/xsarena/cli/cmds_jobs.py
src/xsarena/cli/cmds_joy.py
src/xsarena/cli/cmds_lossless.py
src/xsarena/cli/cmds_macros.py
src/xsarena/cli/cmds_metrics.py
src/xsarena/cli/cmds_modes.py
src/xsarena/cli/cmds_people.py
src/xsarena/cli/cmds_pipeline.py
src/xsarena/cli/cmds_playground.py
src/xsarena/cli/cmds_policy.py
src/xsarena/cli/cmds_preview.py
src/xsarena/cli/cmds_profiles.py
src/xsarena/cli/cmds_project.py
src/xsarena/cli/cmds_prompt.py
src/xsarena/cli/cmds_publish.py
src/xsarena/cli/cmds_report.py
src/xsarena/cli/cmds_run.py
src/xsarena/cli/cmds_snapshot.py
src/xsarena/cli/cmds_study.py
src/xsarena/cli/cmds_style.py
src/xsarena/cli/cmds_tools.py
src/xsarena/cli/cmds_upgrade.py
src/xsarena/cli/context.py
src/xsarena/cli/interactive_session.py
src/xsarena/cli/main.py
src/xsarena/cli/service.py
src/xsarena/coder/__init__.py
src/xsarena/coder/__pycache__/__init__.cpython-313.pyc
src/xsarena/coder/__pycache__/gitops.cpython-313.pyc
src/xsarena/coder/__pycache__/search.cpython-313.pyc
src/xsarena/coder/__pycache__/session.cpython-313.pyc
src/xsarena/coder/__pycache__/tests.cpython-313.pyc
src/xsarena/coder/gitops.py
src/xsarena/coder/search.py
src/xsarena/coder/session.py
src/xsarena/coder/tests.py
src/xsarena/core/__init__.py
src/xsarena/core/__pycache__/__init__.cpython-313.pyc
src/xsarena/core/__pycache__/chunking.cpython-313.pyc
src/xsarena/core/__pycache__/config.cpython-313.pyc
src/xsarena/core/__pycache__/engine.cpython-313.pyc
src/xsarena/core/__pycache__/jobs2_model.cpython-313.pyc
src/xsarena/core/__pycache__/jobs2_runner.cpython-313.pyc
src/xsarena/core/__pycache__/joy.cpython-313.pyc
src/xsarena/core/__pycache__/jsonio.cpython-313.pyc
src/xsarena/core/__pycache__/orchestrator.cpython-313.pyc
src/xsarena/core/__pycache__/pipeline.cpython-313.pyc
src/xsarena/core/__pycache__/profiles.cpython-313.pyc
src/xsarena/core/__pycache__/prompt.cpython-313.pyc
src/xsarena/core/__pycache__/recipes.cpython-313.pyc
src/xsarena/core/__pycache__/redact.cpython-313.pyc
src/xsarena/core/__pycache__/roleplay.cpython-313.pyc
src/xsarena/core/__pycache__/specs.cpython-313.pyc
src/xsarena/core/__pycache__/state.cpython-313.pyc
src/xsarena/core/__pycache__/templates.cpython-313.pyc
src/xsarena/core/__pycache__/tools.cpython-313.pyc
src/xsarena/core/artifacts.py
src/xsarena/core/autopilot/__init__.py
src/xsarena/core/autopilot/__pycache__/__init__.cpython-313.pyc
src/xsarena/core/autopilot/__pycache__/fsm.cpython-313.pyc
src/xsarena/core/autopilot/fsm.py
src/xsarena/core/backends/__init__.py
src/xsarena/core/backends/__pycache__/__init__.cpython-313.pyc
src/xsarena/core/backends/__pycache__/bridge_v2.cpython-313.pyc
src/xsarena/core/backends/__pycache__/transport.cpython-313.pyc
src/xsarena/core/backends/bridge_v2.py
src/xsarena/core/backends/transport.py
src/xsarena/core/chunking.py
src/xsarena/core/config.py
src/xsarena/core/engine.py
src/xsarena/core/jobs/__init__.py
src/xsarena/core/jobs/__pycache__/__init__.cpython-313.pyc
src/xsarena/core/jobs/__pycache__/model.cpython-313.pyc
src/xsarena/core/jobs/__pycache__/scheduler.cpython-313.pyc
src/xsarena/core/jobs/model.py
src/xsarena/core/jobs/scheduler.py
src/xsarena/core/joy.py
src/xsarena/core/jsonio.py
src/xsarena/core/pipeline.py
src/xsarena/core/profiles.py
src/xsarena/core/prompt.py
src/xsarena/core/recipes.py
src/xsarena/core/redact.py
src/xsarena/core/roleplay.py
src/xsarena/core/specs.py
src/xsarena/core/state.py
src/xsarena/core/templates.py
src/xsarena/core/tools.py
src/xsarena/core/v2_orchestrator/__init__.py
src/xsarena/core/v2_orchestrator/__pycache__/__init__.cpython-313.pyc
src/xsarena/core/v2_orchestrator/__pycache__/orchestrator.cpython-313.pyc
src/xsarena/core/v2_orchestrator/__pycache__/specs.cpython-313.pyc
src/xsarena/core/v2_orchestrator/orchestrator.py
src/xsarena/core/v2_orchestrator/specs.py
src/xsarena/modes/__init__.py
src/xsarena/modes/__pycache__/__init__.cpython-313.pyc
src/xsarena/modes/__pycache__/bilingual.cpython-313.pyc
src/xsarena/modes/__pycache__/book.cpython-313.pyc
src/xsarena/modes/__pycache__/chad.cpython-313.pyc
src/xsarena/modes/__pycache__/coder.cpython-313.pyc
src/xsarena/modes/__pycache__/lossless.cpython-313.pyc
src/xsarena/modes/__pycache__/policy.cpython-313.pyc
src/xsarena/modes/__pycache__/study.cpython-313.pyc
src/xsarena/modes/bilingual.py
src/xsarena/modes/book.py
src/xsarena/modes/chad.py
src/xsarena/modes/coder.py
src/xsarena/modes/lossless.py
src/xsarena/modes/policy.py
src/xsarena/modes/study.py
src/xsarena/router/__init__.py
src/xsarena/utils/__init__.py
src/xsarena/utils/metrics.py
===== END LS (src/xsarena) =====

===== RULES DIGEST =====
File: directives/_rules/rules.merged.md (first 200/442 lines)

<!-- Internal operator material; not required for normal users -->
<!-- ===== BEGIN: directives/_rules/sources/CLI_AGENT_RULES.md ===== -->

# CLI Agent Rules & Guidelines for XSArena Project

## Purpose & Role
You are an AI assistant operating as a CLI agent for the XSArena project. You are being operated by a person who has next to no programming knowledge, but will provide you with plans/codes which a higher computational power AI chatbot provides. You have to implement them. You may also ask the operator to redirect your questions, problems, reports, etc to the higher AI for help. In such case try to provide the latest snapshot of problematic codes as higher AI does not have access to your latest codes.

## Core Responsibilities

### 1. Project Context
- You are working with the XSArena project, a prompt studio and CLI tool for AI-assisted content creation
- Current branch is experimental with ongoing development on CLI tools, book generation, and various AI-assisted features
- The project includes CLI tools (`xsarena_cli.py`), TUI (`xsarena_tui.py`), and backend bridge components
- Key features include book generation, content rewriting, style capture/apply, and various AI-assisted workflows

### 2. Codebase Understanding
- Always check the current branch and git status before making changes
- Understand the modular architecture in `src/lmastudio/` with separate modules for bridge, CLI, core, and modes
- Respect existing code conventions and patterns in the project
- Follow the existing project structure and naming conventions

## CLI Agent Operating Rules

### 3. Snapshot Command Implementation
When the command "snapshot" is given by operator, you shall:
- Output a tree structure of the project (using the `tree` command or `find`)
- Include an output of all codes in all relevant (important) files in the project
- Combine everything into a single-file txt output (snapshot.txt)
- This represents the current state of the project for higher AI troubleshooting
- Exclude binaries, CLI prompting instructions, images, downloaded modules, etc.
- Use the `snapshot.sh` script located in the project root for consistent output
- A separate chunking script exists: `chunk_with_message.sh` which can split any file into 100KB chunks with the message "Say \"received.\" after this message. DO nothing else." appended to each chunk

### 4. File & Code Management
- Always identify and work with relevant code files (`.py`, `.sh`, `.json`, `.toml`, `.md`, `.txt`)
- Never include unnecessary files like `.git/`, `__pycache__/`, `books/`, build artifacts
- When modifying code, always maintain the existing style and patterns
- Use the existing `snapshot.sh` script to generate project snapshots

### 5. Environment Cleanup
- Upon each run, check for and remove unnecessary temporary files
- Specifically look for files like `temp_*.txt`, temporary log files, or cache files
- Ask the user for permission before deleting any files they might want to keep
- Clean up any temporary files created during your operations

### 6. Error Handling & Reporting
- Document all errors encountered during operations
- Report whether you solved the issue or if it remains unresolved
- Test your solutions where possible and report the results
- If tests fail, detail what went wrong and what needs fixing

### 7. Communication & Escalation
- When encountering complex issues, suggest redirecting to the higher AI for assistance
- Provide the most recent project snapshot when requesting help from the higher AI
- Clearly explain the problem and any attempted solutions
- Include relevant code snippets and error messages

## Testing & Verification

### 8. Solution Verification
- Always test your changes to ensure they work as expected
- Run relevant tests if available
- Verify that existing functionality remains intact
- Document the testing process and results in your final reports

### 9. Final Reporting
Your final reports must be exhaustive, including:
- What happened during the operation
- What errors/problems you encountered
- How you solved them (or attempted to solve them)
- What wasn't solved or remains problematic
- Whether you tested to check that your solution worked
- What is in-waiting for future implementation
- What you want to consult/counsel with your supervisor AI about
- Any additional insights or recommendations

## Project-Specific Guidelines

### 10. Snapshot File Purpose & Content
- The snapshot file (`project_snapshot.txt`) represents the current state of the project
- It should include relevant source code files (Python, shell, config, etc.)
- It should include project directory structure information
- It excludes generated content (books/), temporary files, and external dependencies
- Its purpose is to provide context to higher AI systems for troubleshooting

### 11. Development Workflow
- Always review git status and branch before making changes
- Understand the modular architecture of `src/lmastudio/`
- Follow existing patterns for CLI command implementation
- Maintain consistency with existing code style
- Respect the project's conventions for configuration and documentation

### 12. QuickRef Guidelines
- The Agent QuickRef files provide standardized workflows and settings in `directives/`:
  - `directives/agent_quickref.md` - Standard narrative approach
  - `directives/agent_quickref.compressed.md` - Compressed narrative approach
  - `directives/agent_quickref.bilingual.md` - Bilingual transformation approach
- Use these files as system text templates to ensure consistent AI behavior
- A ready-made recipe is available at `recipes/mastery.yml` for quick deployment
- These files establish consistent defaults: English-only, teach-before-use narrative, anchor continuation mode, and anti-wrap settings

### 13. Safety & Best Practices
- Never commit or modify files without user permission
- Always backup important files before modifying
- Verify your changes won't break existing functionality
- When in doubt, ask for clarification from the operator
- Document your changes for future reference

## Special Considerations

### 13. Branch Management
- The project has both `main` and `experimental` branches
- Be aware of which branch you're working on
- Understand that experimental branch may have unstable features
- Respect git workflow and don't force changes that might conflict

### 14. File Filtering for Snapshot
The snapshot should include:
- All Python source files (`*.py`)
- Configuration files (`*.json`, `*.toml`)
- Documentation files (`*.md`)
- Shell scripts (`*.sh`)
- Instruction files (`*.txt`)

The snapshot should exclude:
- `books/` directory (user-generated content)
- `__pycache__/` directories and `.pyc` files
- `.git/` directory
- `build/`, `dist/`, `node_modules/` directories
- Large binary files
- The snapshot file itself
- Temporary files

## Using QuickPaste Blocks

### 15. QuickPaste Blocks for Common Tasks
These ready-made command blocks can be pasted directly into the REPL for common operations:

**Block A — Quick Book (Bridge, after /capture)**
Replace TOPIC once. Paste the whole block.
```
/style.nobs on
/style.narrative on
/cont.mode anchor
/out.minchars 4200
/out.passes 1
/repeat.warn on
/z2h "TOPIC" --out=./books/TOPIC.final.md --max=12 --min=4200
```

**Block B — OpenRouter setup + run**
Replace TOPIC and paste.
```
/backend openrouter
/or.model openrouter/auto
/or.status
/style.nobs on
/style.narrative on
/cont.mode anchor
/out.minchars 4200
/out.passes 1
/repeat.warn on
/z2h "TOPIC" --out=./books/TOPIC.final.md --max=12 --min=4200
```

**Block C — JobSpec-first (single paste, fully repeatable)**
This is truly one block: it triggers /run.inline and includes the spec. Replace TOPIC and paste everything (including EOF).
```
/run.inline
task: book.zero2hero
subject: "TOPIC"
styles: [no-bs]
system_text: |
  English only. Teach-before-use narrative. Prose flow; avoid bullet walls.
prelude:
  - "/cont.mode anchor"
  - "/repeat.warn on"
io:
  output: file
  outPath: "./books/TOPIC.final.md"
max_chunks: 12
continuation:
  mode: anchor
  minChars: 4200
  pushPasses: 1
  repeatWarn: true
EOF
```

### 16. Helpful Macros and Tips
- **Cancel/resume anytime**: /cancel, /book.pause, /book.resume
- **If it gets listy**: /out.passes 0
- **If too short**: /out.minchars 4800; /out.passes 2
- **One-liner macro**:
  - Save: /macro.save z2h.go "/z2h \"${1}\" --out=./books/${1|slug}.final.md --max=12 --min=4200"
  - Use: /macro.run z2h.go "Your Topic"

## Final Notes

===== END RULES DIGEST =====

===== CONFIG & SESSION =====
===== BEGIN INCLUDED FILE: .xsarena/config.yml =====
backend: bridge
model: default
window_size: 100
anchor_length: 300
continuation_mode: anchor
repetition_threshold: 0.8
max_retries: 3
api_key: null
base_url: [REDACTED_URL]
timeout: 300
redaction_enabled: false
===== END INCLUDED FILE: .xsarena/config.yml =====

===== BEGIN INCLUDED FILE: .xsarena/session_state.json =====
{
  "history": [],
  "anchors": [],
  "continuation_mode": "anchor",
  "anchor_length": 300,
  "repetition_threshold": 0.8,
  "repetition_ngram": 4,
  "repetition_warn": true,
  "backend": "bridge",
  "model": "default",
  "window_size": 100,
  "settings": {},
  "session_mode": null,
  "coverage_hammer_on": true,
  "output_budget_snippet_on": true,
  "output_push_on": true,
  "output_min_chars": 1000,
  "output_push_max_passes": 3
}
===== END INCLUDED FILE: .xsarena/session_state.json =====

===== END CONFIG & SESSION =====

===== RECIPES DIGEST =====
===== BEGIN INCLUDED FILE: recipes/america-political-history.yml =====
task: book.zero2hero
subject: "Modern American Political History — Elections and Power (c. 1800–present)"

system_text: |
  Modern American Political History (c. 1800 → present) — Dense Narrative With Elections as Narrative Hinges (Nudge)

  What to write
  - A comprehensive, flowing narrative of the United States' modern political history from roughly 1800 to the present. Federal institutions are central; bring in states when they decisively shape national politics (e.g., Reconstruction
---TRUNCATED---
yle.compressed on"
  - "/out.budget on"
  - "/cont.mode anchor"
  - "/cont.anchor 240"
  - "/repeat.warn on"
  - "/repeat.thresh 0.35"
  - "/out.minchars 5600"
  - "/out.passes 3"

io:
  output: file
  outPath: "./books/modern-american-political-history.elections.final.md"

continuation:
  mode: anchor
  minChars: 5600
  pushPasses: 3
  repeatWarn: true
  anchorLen: 240

# Unlimited run: omit max_chunks (or set to 0/null). The engine treats unset/0 as “no cap”.
# max_chunks: 0

hammer: true
===== END INCLUDED FILE: recipes/america-political-history.yml =====

===== BEGIN INCLUDED FILE: recipes/arche_professor.yml =====
task: answer.chad
subject: "Archetypal Professor Transformer"
system_text: |
  {{file: directives/arche_professor.en.md}}
io:
  output: file
  outPath: "./books/arche_professor.out.md"
max_chunks: 1
prelude:
  - "/out.minchars 1400"
# Usage: after it starts, paste your SOURCE_TEXT block when prompted (or run /next with the block)
===== END INCLUDED FILE: recipes/arche_professor.yml =====

===== BEGIN INCLUDED FILE: recipes/britain-political-history.yml =====
task: book.zero2hero
subject: "Modern Political History of Britain — Elections and Power (c. 1800–present)"
system_text: |
  Modern Political History of Britain (c. 1800 → present) — Dense Narrative With Elections as Narrative Hinges (Nudge)

  What to write
  - A comprehensive, flowing narrative of Britain's modern political history from roughly 1800 to the present day. England, Scotland, Wales, and (for the Union's story) Ireland/Northern Ireland are in scope. Keep prose dense, continu
---TRUNCATED---
acters per chunk (dense). No lists. Minimal headings. If you approach the limit, stop cleanly with: NEXT: [Continue].

  End‑state
  - Conclude with "what changed vs what stayed" across institutions, parties, rules, and political economy; what elections actually moved and what they could not.

io:
  output: file
  outPath: "./books/modern-britain-political-history.elections.final.md"

continuation:
  mode: anchor
  minChars: 4800
  pushPasses: 2
  repeatWarn: true

max_chunks: 14

hammer: true
===== END INCLUDED FILE: recipes/britain-political-history.yml =====

===== BEGIN INCLUDED FILE: recipes/clinical.en.yml =====
task: book.zero2hero
subject: "Clinical Psychology"
styles: [no-bs]
io:
  output: file
  outPath: "./books/clinical.manual.en.md"
max_chunks: 6
===== END INCLUDED FILE: recipes/clinical.en.yml =====

===== BEGIN INCLUDED FILE: recipes/fast_anchors-next-smoke.yml =====
task: book.zero2hero
subject: Anchors & NEXT Smoke
system_text: "Goal: pedagogical manual from foundations to practice with steady depth;\
  \ no early wrap-ups.\nLANGUAGE CONSTRAINTS\n- Plain, direct language; avoid pompous\
  \ terms and circumlocutions.\n- Prefer short sentences and concrete nouns/verbs.\n\
  - Remove throat‑clearing, meta commentary, and rhetorical filler.\nCOMPRESSED NARRATIVE\
  \ OVERLAY\n- Style: compressed narrative prose; minimal headings; no bullet walls.\n\
  - Tea
---TRUNCATED---
ic\
  \ fact patterns if you can't cite precisely. Educational,\n  not legal advice.\n\
  - If near length limit, stop cleanly and end with: NEXT: [Continue].\nContinuation:\
  \ continue exactly from anchor; do not restart sections; do not summarize prematurely.\
  \ If nearing length limit, stop cleanly with: NEXT: [Continue]."
max_chunks: 2
continuation:
  mode: anchor
  minChars: 1200
  pushPasses: 1
  repeatWarn: true
io:
  output: file
  outPath: ./books/finals/anchors-next-smoke.final.md
===== END INCLUDED FILE: recipes/fast_anchors-next-smoke.yml =====

===== BEGIN INCLUDED FILE: recipes/fast_psychology-foundations-to-master-s-clinical-focus.yml =====
task: book.zero2hero
subject: Psychology — Foundations to Master's (Clinical Focus)
system_text: "Goal: pedagogical manual from foundations to practice with steady depth;\
  \ no early wrap-ups.\nLANGUAGE CONSTRAINTS\n- Plain, direct language; avoid pompous\
  \ terms and circumlocutions.\n- Prefer short sentences and concrete nouns/verbs.\n\
  - Remove throat‑clearing, meta commentary, and rhetorical filler.\nPEDAGOGY & NARRATIVE\
  \ OVERLAY\n- Tone: explanatory narrative with smooth trans
---TRUNCATED---
: only after definition; otherwise\
  \ add a 1-sentence inline gloss.\n- Keep mini-drills practical (identify, discriminate,\
  \ apply).\nContinuation: continue exactly from anchor; do not restart sections;\
  \ do not summarize prematurely. If nearing length limit, stop cleanly with: NEXT:\
  \ [Continue]."
max_chunks: 40
continuation:
  mode: anchor
  minChars: 6000
  pushPasses: 3
  repeatWarn: true
io:
  output: file
  outPath: ./books/finals/psychology-masters-clinical.narrative.final.md
===== END INCLUDED FILE: recipes/fast_psychology-foundations-to-master-s-clinical-focus.yml =====

===== BEGIN INCLUDED FILE: recipes/mastery.yml =====
task: book.zero2hero
subject: "Your Topic"
system_text: |
  {{file: directives/agent_quickref.md}}
prelude:
  - "/style.nobs on"
  - "/style.narrative on"
  - "/cont.mode anchor"
  - "/repeat.warn on"
io:
  output: file
  outPath: "./books/your-topic.final.md"
max_chunks: 12
continuation:
  mode: anchor
  minChars: 4200
  pushPasses: 1
  repeatWarn: true
===== END INCLUDED FILE: recipes/mastery.yml =====

===== BEGIN INCLUDED FILE: recipes/mixer_modern-political-history-of-britain-elections-and-power-c-1832-present.yml =====
task: book.zero2hero
subject: "Modern Political History of Britain — Elections and Power (c. 1832–present)"
system_text: |
  Goal: pedagogical manual from foundations to practice; no early wrap-ups.
  LANGUAGE CONSTRAINTS
  - Plain, direct language; avoid pompous terms and circumlocutions.
  - Prefer short sentences and concrete nouns/verbs.
  - Remove throat‑clearing, meta commentary, and rhetorical filler.
  COMPRESSED NARRATIVE OVERLAY
  - Style: compressed narrative prose; minimal head
---TRUNCATED---
 stuffing.
  - Use generic fact patterns if you can't cite precisely. Educational,
    not legal advice.
  - If near length limit, stop cleanly and end with: NEXT: [Continue].
  Continuation: continue exactly from anchor; do not restart; do not summarize prematurely. If near limit, stop with: NEXT: [Continue].
io:
  output: file
  outPath: "./books/modern-britain-political-history.elections.final.md"
max_chunks: 14
continuation:
  mode: anchor
  minChars: 4800
  pushPasses: 2
  repeatWarn: true
===== END INCLUDED FILE: recipes/mixer_modern-political-history-of-britain-elections-and-power-c-1832-present.yml =====

===== BEGIN INCLUDED FILE: recipes/mixer_quick-test.yml =====
# Generated by xsarena mix
task: book.nobs
subject: "Quick Test"
system_text: |
  Goal: no‑bullshit manual; only what changes decisions or understanding; tight prose.
  LANGUAGE CONSTRAINTS
  - Plain, direct language; avoid pompous terms and circumlocutions.
  - Prefer short sentences and concrete nouns/verbs.
  - Remove throat‑clearing, meta commentary, and rhetorical filler.
  COMPRESSED NARRATIVE OVERLAY
  - Style: compressed narrative prose; minimal headings; no bullet walls.
  - Teach-b
---TRUNCATED---
yword stuffing.
  - Use generic fact patterns if you can't cite precisely. Educational,
    not legal advice.
  - If near length limit, stop cleanly and end with: NEXT: [Continue].
  Continuation: continue exactly from anchor; do not restart sections; do not summarize prematurely. If nearing length limit, stop cleanly with: NEXT: [Continue].
io:
  output: file
  outPath: "./books/quick-test.final.md"
max_chunks: 12
continuation:
  mode: anchor
  minChars: 4200
  pushPasses: 1
  repeatWarn: true
===== END INCLUDED FILE: recipes/mixer_quick-test.yml =====

===== BEGIN INCLUDED FILE: recipes/mixer_test-subject.yml =====
# Generated by xsarena mix
task: book.zero2hero
subject: "Test Subject"
system_text: |
  Goal: pedagogical manual from foundations to practice with steady depth; no early wrap-ups.
  LANGUAGE CONSTRAINTS
  - Plain, direct language; avoid pompous terms and circumlocutions.
  - Prefer short sentences and concrete nouns/verbs.
  - Remove throat‑clearing, meta commentary, and rhetorical filler.
  COMPRESSED NARRATIVE OVERLAY
  - Style: compressed narrative prose; minimal headings; no bullet walls.
---TRUNCATED---
ord stuffing.
  - Use generic fact patterns if you can't cite precisely. Educational,
    not legal advice.
  - If near length limit, stop cleanly and end with: NEXT: [Continue].
  Continuation: continue exactly from anchor; do not restart sections; do not summarize prematurely. If nearing length limit, stop cleanly with: NEXT: [Continue].
io:
  output: file
  outPath: "./books/test-subject.final.md"
max_chunks: 12
continuation:
  mode: anchor
  minChars: 4200
  pushPasses: 1
  repeatWarn: true
===== END INCLUDED FILE: recipes/mixer_test-subject.yml =====

===== BEGIN INCLUDED FILE: recipes/psychology_masters_clinical.yml =====
task: book.zero2hero
subject: "Psychology — Foundations to Master's (clinical nudge)"
system_text: |
  Psychology — Plain, Compressed, Neutral Narrative (Self‑Study to Master's) with a Clinical Nudge

  Purpose
  - Produce a compact, continuous narrative of psychology from foundations to the level expected in a typical master's program.
  - Use human, straightforward language in tight paragraphs. Neutral point of view. No rhetorical questions, no hype.
  - Teach‑before‑use: define any
---TRUNCATED---
 should be able to explain and do (conceptual design, measurement reasoning, interpretation, limits), and how clinical knowledge integrates with general psychology without dominating it.
prelude:
  - "/style.narrative off"
  - "/style.compressed on"
  - "/cont.mode anchor"
  - "/repeat.warn on"
  - "/out.budget on"
io:
  output: file
  outPath: "./books/psychology.masters.clinical-nudge.compressed.md"
max_chunks: 16
continuation:
  mode: anchor
  minChars: 4800
  pushPasses: 2
  repeatWarn: true
===== END INCLUDED FILE: recipes/psychology_masters_clinical.yml =====

===== BEGIN INCLUDED FILE: recipes/role_launcher.yml =====
task: answer.role
subject: "Role-Based Analysis"
system_text: |
  You are an expert in role-based analysis and content creation.
  The user will specify which role to use from the available options.
  Available roles are documented in directives/role_launcher.md
prelude:
  - "/style.nobs on"
  - "/style.narrative on"
io:
  output: file
  outPath: "./books/role_analysis.out.md"
max_chunks: 1
# Usage: After launching, specify which role you want to use, then provide your topic
===== END INCLUDED FILE: recipes/role_launcher.yml =====

===== END RECIPES DIGEST =====

===== BOOKS SAMPLES =====
===== END BOOKS SAMPLES =====

===== REVIEW SIGNALS =====
===== END REVIEW SIGNALS =====

===== JOBS SUMMARY =====
- Job e950494e-ac6f-4527-90c3-fce29c4ab582  State: FAILED  Chunks: 0  Retries: 0  Failovers: 0  Watchdogs: 0
  Window: 2025-10-16T02:04:01 → 2025-10-16T02:04:02
  Last events:
    - 2025-10-16T02:04:01  job_submitted
    - 2025-10-16T02:04:01  job_started
    - 2025-10-16T02:04:02  job_failed
    - 2025-10-16T02:04:02  job_ended
- Job ec1000e3-3f39-46ed-9dd6-4cb317f057da  State: FAILED  Chunks: 0  Retries: 3  Failovers: 0  Watchdogs: 0
  Window: 2025-10-17T05:49:26 → 2025-10-17T05:49:43
  Last events:
    - 2025-10-17T05:49:27  retry
    - 2025-10-17T05:49:29  retry
    - 2025-10-17T05:49:34  retry
    - 2025-10-17T05:49:42  job_failed
    - 2025-10-17T05:49:43  job_ended
- Job eceedd66-d05d-4aae-9ac8-92a8fa4a24e4  State: PENDING  Chunks: 0  Retries: 0  Failovers: 0  Watchdogs: 0
  Window: 2025-10-17T05:52:36 → 2025-10-17T05:52:36
  Last events:
    - 2025-10-17T05:52:36  job_submitted
    - 2025-10-17T05:52:36  control_pause
    - 2025-10-17T05:52:36  control_resume

===== END JOBS SUMMARY =====

===== IMPORTANT FILES (INLINE) =====

===== BEGIN INCLUDED FILE: .xsarena/config.yml =====
backend: bridge
model: default
window_size: 100
anchor_length: 300
continuation_mode: anchor
repetition_threshold: 0.8
max_retries: 3
api_key: null
base_url: [REDACTED_URL]
timeout: 300
redaction_enabled: false
===== END INCLUDED FILE: .xsarena/config.yml =====

===== BEGIN INCLUDED FILE: .xsarena/session_state.json =====
{
  "history": [],
  "anchors": [],
  "continuation_mode": "anchor",
  "anchor_length": 300,
  "repetition_threshold": 0.8,
  "repetition_ngram": 4,
  "repetition_warn": true,
  "backend": "bridge",
  "model": "default",
  "window_size": 100,
  "settings": {},
  "session_mode": null,
  "coverage_hammer_on": true,
  "output_budget_snippet_on": true,
  "output_push_on": true,
  "output_min_chars": 1000,
  "output_push_max_passes": 3
}
===== END INCLUDED FILE: .xsarena/session_state.json =====

===== BEGIN INCLUDED FILE: directives/_rules/rules.merged.md =====

<!-- Internal operator material; not required for normal users -->
<!-- ===== BEGIN: directives/_rules/sources/CLI_AGENT_RULES.md ===== -->

# CLI Agent Rules & Guidelines for XSArena Project

## Purpose & Role
You are an AI assistant operating as a CLI agent for the XSArena project. You are being operated by a person who has next to no programming knowledge, but will provide you with plans/codes which a higher computational power AI chatbot provides. You have to implement them. You may also as
---TRUNCATED---
ches (show absurd consequence).
- Translate jargon to street-speak.
- Reality vignette (what actually happens).
- Map incentives (who wins, who pays).
- Staged Q&A (You will say… Answer…).
- What's left when naked. Steelman if anything remains.
- Verdict with emptiness scores and a clean kicker.

Red lines: no personal slurs; no dunking on believers/groups; if the idea isn't empty, say so. Lower the score and say what stands.

<!-- ===== END: directives/style.kasravi_oliver.en.md ===== -->

===== END INCLUDED FILE: directives/_rules/rules.merged.md =====

===== BEGIN INCLUDED FILE: docs/CONTEXT.md =====
# Pinned short state of the world; max 15 lines

## What changed this week
- Agent journal system implemented for session continuity
- New documentation files added for handoffs and startup

## Current defaults (style, knobs)
- Default style: narrative with teach-before-use
- Output minchars: 3000
- Continuation: anchor mode
- Repetition guard: on with 0.35 threshold

## Known caveats (CF, timeouts)
- Bridge may require Cloudflare challenge solving
- Use 60s timeouts for normal operations
- 180s timeouts for heavy operations

## Next planned steps
- Implement notification system for long-running tasks
- Review and update documentation as needed
===== END INCLUDED FILE: docs/CONTEXT.md =====

===== BEGIN INCLUDED FILE: docs/HANDOFF.md =====
# Handoff (template)
- Branch: (git rev-parse --abbrev-ref HEAD)
- Snapshot digest: (sha256 of .xsarena/snapshots/final_snapshot.txt)
- Commands run:
- Expected vs Actual:
- Errors/Logs:
- Job ID/context (if any):
- Ask (what you want from higher AI):
===== END INCLUDED FILE: docs/HANDOFF.md =====

===== BEGIN INCLUDED FILE: docs/IMPORTANT_FILES.md =====
# Important Files and Directories

## Project Structure
This document describes the key files and directories in the XSArena project and their purposes.

## Top-Level Directories
- `books/` - Output files (manuals, cram guides, flashcards, glossaries, indexes)
- `sources/` - Input corpora organized by topic
- `directives/` - System directives and templates
- `data/` - Blueprints, resource maps, tag maps
- `recipes/` - YAML/JSON plans for job execution
- `legacy/` - Deprecated LMA-era shims with
---TRUNCATED---
ent/journal.jsonl` - Agent session log for continuity
- `.xsarena/agent/session_*.md` - Session-specific notes

## Job Artifacts
- `.xsarena/jobs/*/job.json` - Job state and metadata
- `.xsarena/jobs/*/events.jsonl` - Job event log
- `.xsarena/jobs/*/sections/` - Job content sections
- `.xsarena/jobs/*/plan.json` - Job plan and outline

## Documentation
- `docs/` - Additional documentation files
- `docs/handoff/` - Handoff templates for communication
- `docs/_help_*.txt` - CLI help output cache
===== END INCLUDED FILE: docs/IMPORTANT_FILES.md =====

===== BEGIN INCLUDED FILE: docs/INDEX.md =====
# Documentation Index

## Core Documentation
- [README.md](../README.md) - Canonical user manual (exhaustive)
- [CONCEPT.md](CONCEPT.md) - Core concepts and human-focused workflow
- [CLI_AGENT_RULES.md](../CLI_AGENT_RULES.md) - Complete operating rules and appendices
- [ARCHITECTURE.md](ARCHITECTURE.md) - System architecture and components overview
- [PROJECT_MAP.md](PROJECT_MAP.md) - Project structure and component overview

## Quick Reference
- [docs/SHORTCUTS.md](SHORTCUTS.md) - Agent shortcu
---TRUNCATED---
AGENT_JOURNAL.md](AGENT_JOURNAL.md) - Session logging system
- [docs/KNOWN_ISSUES.md](KNOWN_ISSUES.md) - Known issues and workarounds
- [docs/INDEX.md](INDEX.md) - This file (documentation map)

## Internal Section
- [docs/INTERNAL_AGENT_NOTES.md](INTERNAL_AGENT_NOTES.md) - Internal operator material; not required for normal users

## Sync & Maintenance
- [docs/SYNC_MATRIX.md](SYNC_MATRIX.md) - Sync whitelist and policies
- [scripts/sync_pass.sh](../scripts/sync_pass.sh) - Sync validation script
===== END INCLUDED FILE: docs/INDEX.md =====

===== BEGIN INCLUDED FILE: docs/INTERNAL_AGENT_NOTES.md =====
# Internal Operator Notes

## Purpose
This document contains internal operator material and agent-focused workflows that are not required for normal human writer usage of XSArena.

## When These Rules Are Used
- Internal development and testing workflows
- Automated system operations
- Advanced user customization
- Integration with other tools and systems

## Access
These materials are intended for:
- XSArena developers
- System administrators
- Advanced users working on custom integrations
- Internal testing and QA processes

## Relationship to User Workflow
The directives in `directives/_rules` are internal operator material and are not required for normal users who simply want to write books using the standard XSArena workflow.

For normal usage, see the main documentation and `docs/CONCEPT.md`.
===== END INCLUDED FILE: docs/INTERNAL_AGENT_NOTES.md =====

===== BEGIN INCLUDED FILE: docs/KNOWN_ISSUES.md =====
# Known Issues

## Runner Contract Issues

### Events Schema Inconsistencies
**Issue**: Some event types in events.jsonl may not follow the standard schema
**Status**: Under review
**Impact**: May affect monitoring and analysis tools
**Expected fix**: Standardize all event types to use consistent schema

**Standard Event Schema**:
```json
{
  "timestamp": "ISO8601 timestamp",
  "type": "event_type",
  "job_id": "job identifier",
  "stage": "current stage",
  "data": { ... additional data specifi
---TRUNCATED---
y not be available at all stage levels
**Status**: Enhancement planned
**Impact**: Less granular budget monitoring

## Profile Support

### Profile Consistency
**Issue**: Style profiles (mastery/pedagogy/reference) may not be consistently applied across all stages
**Status**: Under review
**Impact**: Inconsistent output styling in multi-stage jobs

## Recommended Workarounds

For best results, use the JobSpec-first workflow and verify your specs contain all required parameters before execution.
===== END INCLUDED FILE: docs/KNOWN_ISSUES.md =====

===== BEGIN INCLUDED FILE: docs/OUTBOX.md =====
# OUTBOX - Final Reports

## Latest Reports

2025-10-12: FINAL WRAP - Appendices added to CLI_AGENT_RULES.md
  - Added 'Final Wrap & Continuous Improvement' appendix
  - Added 'Higher AI Prompting Directive' appendix
  - Files touched: CLI_AGENT_RULES.md
  - Tests: xsarena doctor env (PASS)
  - Snapshot: snapshots/after_cleanup_final.tar.gz
- Stabilized autopilot + bridge v2; tests green; see review/report_*.tar.gz
- Stabilized autopilot + bridge v2; tests green; see review/report_*.tar.gz
===== END INCLUDED FILE: docs/OUTBOX.md =====

===== BEGIN INCLUDED FILE: docs/PROFILES.md =====
# Style and Quality Profiles

This document contains standardized style and quality profiles for XSArena content generation.

## Content Styles

### No-Bullshit (No-BS)
- Direct, to-the-point language
- No fluff or unnecessary explanations
- Focus on actionable information
- Minimal examples, maximum substance
- Command: `/style.nobs on`

### Narrative Overlay
- Teach-before-use approach
- Define terms before first use (with bold emphasis)
- Include short vignettes and examples
- Quick checks an
---TRUNCATED---
teristics
2. Capture the style: `xsarena style.capture <reference> <profile>`
3. Apply to new topics: `xsarena style.apply <profile> <topic> <output>`

Example custom profile workflow:
```
# Create reference content with desired style
xsarena z2h "Reference Topic" --out=refs/reference_style.md --max=2

# Capture the style
xsarena style.capture refs/reference_style.md profiles/custom.style.md

# Apply to new topics
xsarena style.apply profiles/custom.style.md "New Topic" books/new_content.md
```
===== END INCLUDED FILE: docs/PROFILES.md =====

===== BEGIN INCLUDED FILE: docs/RUNBOOKS.md =====
# Runbooks - Copy-paste Workflows

This document contains standardized workflows and procedures for common XSArena operations.

## Core Workflows

### Mastery Book Generation
For long, comprehensive book runs with maximum depth:

Settings to use:
- Style: compressed narrative (avoid lists/drills/vignettes)
- Output: minchars ≈ 4200-5200
- Chunks: 24+ for comprehensive coverage
- Continuation: anchor mode with coverage hammer

Commands:
```
xsarena z2h "Your Topic" --out=./books/topic.final.md
---TRUNCATED---
aw_document.txt outputs/ --org="Organization" --jurisdiction="Location"
```

## Performance Optimization

### Backend Selection
- Bridge: Browser-based, good for interactive sessions
- OpenRouter: Direct API, better for long runs
- Fallback: Automatic failover when primary unavailable

### Resource Management
- Monitor job resource usage: `xsarena jobs summary <job_id>`
- Clean up completed jobs: `xsarena jobs cancel <job_id>` (if no longer needed)
- Use appropriate chunk sizes for content type
===== END INCLUDED FILE: docs/RUNBOOKS.md =====

===== BEGIN INCLUDED FILE: docs/SHORTCUTS.md =====
# Agent Shortcuts and Modes

This document contains quick reference shortcuts and command modes for the CLI agent.

## Text Shortcuts & Modes
See CLI_AGENT_RULES.md Appendix — Text Shortcuts & Modes for the complete list of available shortcuts.

## Common Commands Reference

### Startup & Context
- `STARTUP` - Initialize context and show project overview
- `SNAPSHOT` - Create project snapshot
- `HYGIENE` - Safe cleanup of temporary files
- `HEALTH` - Run health checks

### Modes
- `MODE: SAFE`
---TRUNCATED---
n implement the suggestion with proper verification
3. Follow the 5-step verification process:
   - Verify suggestions against actual codebase
   - Validate fixes are appropriate for current structure
   - Test fixes if possible before recommending
   - Document problem and solution clearly
   - Prioritize by impact and feasibility

## Quick Reference Commands
- `REPORT: SUCCESS` - Success report format
- `REPORT: BLOCKED` - Blocked report format
- `REPORT: RISK` - Risk assessment report format
===== END INCLUDED FILE: docs/SHORTCUTS.md =====

===== BEGIN INCLUDED FILE: docs/SNAPSHOT_POLICY.md =====
# Snapshot Policy

## Purpose
A snapshot is a text-only representation of the project for debugging and sharing with higher AI systems. It includes tree structure and relevant files while excluding generated content and sensitive data.

## Standard Snapshot Content
- Source code (src/, directives/, data/, playbooks/, recipes/)
- Configuration files (pyproject.toml, README.md, LICENSE, etc.)
- Project structure information
- Excludes: books/, .git/, __pycache__/, build artifacts, large/binary fil
---TRUNCATED---
 Recipe and book content samples
- Review artifacts inclusion
- Combined snapshot digest for integrity verification

**Usage**:
```bash
# Basic usage (creates ~/xsa_snapshot_pro.txt)
python tools/snapshot_pro.py

# With custom options
python tools/snapshot_pro.py --out /tmp/snapshot.txt --max-inline 100000
```

**When to use**: For complex debugging scenarios requiring comprehensive system state, especially when escalating to higher AI systems or for detailed analysis of multi-component issues.
===== END INCLUDED FILE: docs/SNAPSHOT_POLICY.md =====

===== BEGIN INCLUDED FILE: docs/SYNC_MATRIX.md =====
# Sync Matrix

## What is this?
A simple list of known top-level items and their policy (keep/ignore/exclude from snapshot).

## Whitelist (keep tracked in git)
- src/
- directives/
- data/
- playbooks/
- recipes/
- docs/
- README.md
- CLI_AGENT_RULES.md
- pyproject.toml
- models.json
- xsarena_cli.py
- xsarena_doctor.py
- .gitignore
- legacy/
- contrib/

## Local State (not tracked)
- .xsarena/agent/

## Generated (ignored by default)
- xsarena.egg-info/
- docs/_help_*.txt
- snapshot_chunks/

## Exceptions
- SNAPSHOT+JOBS: include .xsarena/jobs/<job_id>/events.jsonl and job.json only when explicitly requested.
===== END INCLUDED FILE: docs/SYNC_MATRIX.md =====

===== BEGIN INCLUDED FILE: docs/TROUBLESHOOTING.md =====
# Troubleshooting

Bridge-first:
- Start: xsarena service start-bridge
- Browser: install/enable lmarena_bridge.user.js; open LMArena; click Retry once
- Ping: xsarena backend ping; xsarena doctor ping

OpenRouter fallback:
- export OPENROUTER_API_KEY=...
- xsarena backend ping --backend openrouter

Short chunks:
- Increase --min and --passes; set narrative on; compressed off

Repetition/restarts:
- cont.mode anchor; repetition warn on; anchors >= 200–300 chars

Doctor flow:
- xsarena doctor env; xsarena doctor ping; xsarena doctor run

Reports:
- xsarena report quick --book <path>
- xsarena report handoff --book <path>
===== END INCLUDED FILE: docs/TROUBLESHOOTING.md =====

===== BEGIN INCLUDED FILE: mypy.ini =====
[mypy]
python_version = 3.9
warn_return_any = True
warn_unused_configs = True
warn_unused_ignores = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = True

# Ignore missing imports for optional extras
[mypy-xsarena.core.roleplay]
ignore_missing_imports = True

[mypy-xsarena.core.joy]
ignore_missing_imports = True

[mypy-lma_templates]
ignore_missing_imports = True

[mypy-prompt_toolkit.*]
ignore_missing_imports = True

[mypy-aiohttp.*]
ignore_missing_imports = True

[mypy-pytest]
ignore_missing_imports = True
===== END INCLUDED FILE: mypy.ini =====

===== BEGIN INCLUDED FILE: pyproject.toml =====
[build-system]
requires = ["setuptools>=45", "wheel", "setuptools_scm[toml]>=6.2"]
build-backend = "setuptools.build_meta"

[project]
name = "xsarena"
version = "0.1.0"
description = "AI-powered writing and coding studio"
readme = "README.md"
requires-python = ">=3.9"
license = {text = "MIT"}
authors = [
    {name = "XSArena Team"}
]
dependencies = [
    "typer>=0.9.0",
    "python-dotenv>=1.0.0",
    "aiohttp>=3.8.0",
    "pydantic>=2.0.0",
    "PyYAML>=6.0",
    "rich>=13.0.0",
    "fastapi>=0
---TRUNCATED---
r one release cycle:
lmastudio = "xsarena.cli.main:run"
lmastudio-bridge = "xsarena.bridge_v2.api_server:run_server"

[project.urls]
Homepage = "[REDACTED_URL]"
Repository = "[REDACTED_URL]"

[tool.setuptools.packages.find]
where = ["src"]

[tool.ruff]
line-length = 100

[tool.ruff.lint]
select = ["E", "W", "F", "I", "C", "B", "SIM"]

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py", "*_test.py"]
asyncio_mode = "auto"
===== END INCLUDED FILE: pyproject.toml =====

===== BEGIN INCLUDED FILE: README.md =====
# XSArena

## Mission
XSArena is a human writer workflow tool that bridges to LMArena for long-form content creation. It focuses on providing a structured approach to writing books, manuals, and other long-form content with AI assistance.

## Quick Start

1. Install the userscript (`xsarena_bridge.user.js`) and open LMArena in your browser
2. Start the bridge server: `xsarena service start-bridge-v2` (port 5102)
3. Run a book: `xsarena run book "Your Topic" --length standard --span medium`
4. Fo
---TRUNCATED---
tor ping; xsarena doctor run
- Chunk too short → increase minchars and passes: xsarena control minchars 5000 --passes 3
- Too listy → Turn narrative on: xsarena control narrative on
- Repeats or restarts → Ensure anchor mode is on (xsarena control cont-mode anchor) and coverage hammer is on (xsarena control hammer on)
- Before sharing state → xsarena fix run; xsarena snapshot write

Contributing
- Code style: Ruff/Black, type hints
- Tests: pytest -q
- Docs regen: see scripts/gen_docs.sh
===== END INCLUDED FILE: README.md =====

===== BEGIN INCLUDED FILE: recipes/america-political-history.yml =====
task: book.zero2hero
subject: "Modern American Political History — Elections and Power (c. 1800–present)"

system_text: |
  Modern American Political History (c. 1800 → present) — Dense Narrative With Elections as Narrative Hinges (Nudge)

  What to write
  - A comprehensive, flowing narrative of the United States' modern political history from roughly 1800 to the present. Federal institutions are central; bring in states when they decisively shape national politics (e.g., Reconstruction
---TRUNCATED---
yle.compressed on"
  - "/out.budget on"
  - "/cont.mode anchor"
  - "/cont.anchor 240"
  - "/repeat.warn on"
  - "/repeat.thresh 0.35"
  - "/out.minchars 5600"
  - "/out.passes 3"

io:
  output: file
  outPath: "./books/modern-american-political-history.elections.final.md"

continuation:
  mode: anchor
  minChars: 5600
  pushPasses: 3
  repeatWarn: true
  anchorLen: 240

# Unlimited run: omit max_chunks (or set to 0/null). The engine treats unset/0 as “no cap”.
# max_chunks: 0

hammer: true
===== END INCLUDED FILE: recipes/america-political-history.yml =====

===== BEGIN INCLUDED FILE: recipes/arche_professor.yml =====
task: answer.chad
subject: "Archetypal Professor Transformer"
system_text: |
  {{file: directives/arche_professor.en.md}}
io:
  output: file
  outPath: "./books/arche_professor.out.md"
max_chunks: 1
prelude:
  - "/out.minchars 1400"
# Usage: after it starts, paste your SOURCE_TEXT block when prompted (or run /next with the block)
===== END INCLUDED FILE: recipes/arche_professor.yml =====

===== BEGIN INCLUDED FILE: recipes/britain-political-history.yml =====
task: book.zero2hero
subject: "Modern Political History of Britain — Elections and Power (c. 1800–present)"
system_text: |
  Modern Political History of Britain (c. 1800 → present) — Dense Narrative With Elections as Narrative Hinges (Nudge)

  What to write
  - A comprehensive, flowing narrative of Britain's modern political history from roughly 1800 to the present day. England, Scotland, Wales, and (for the Union's story) Ireland/Northern Ireland are in scope. Keep prose dense, continu
---TRUNCATED---
acters per chunk (dense). No lists. Minimal headings. If you approach the limit, stop cleanly with: NEXT: [Continue].

  End‑state
  - Conclude with "what changed vs what stayed" across institutions, parties, rules, and political economy; what elections actually moved and what they could not.

io:
  output: file
  outPath: "./books/modern-britain-political-history.elections.final.md"

continuation:
  mode: anchor
  minChars: 4800
  pushPasses: 2
  repeatWarn: true

max_chunks: 14

hammer: true
===== END INCLUDED FILE: recipes/britain-political-history.yml =====

===== BEGIN INCLUDED FILE: recipes/clinical.en.yml =====
task: book.zero2hero
subject: "Clinical Psychology"
styles: [no-bs]
io:
  output: file
  outPath: "./books/clinical.manual.en.md"
max_chunks: 6
===== END INCLUDED FILE: recipes/clinical.en.yml =====

===== BEGIN INCLUDED FILE: recipes/fast_anchors-next-smoke.yml =====
task: book.zero2hero
subject: Anchors & NEXT Smoke
system_text: "Goal: pedagogical manual from foundations to practice with steady depth;\
  \ no early wrap-ups.\nLANGUAGE CONSTRAINTS\n- Plain, direct language; avoid pompous\
  \ terms and circumlocutions.\n- Prefer short sentences and concrete nouns/verbs.\n\
  - Remove throat‑clearing, meta commentary, and rhetorical filler.\nCOMPRESSED NARRATIVE\
  \ OVERLAY\n- Style: compressed narrative prose; minimal headings; no bullet walls.\n\
  - Tea
---TRUNCATED---
ic\
  \ fact patterns if you can't cite precisely. Educational,\n  not legal advice.\n\
  - If near length limit, stop cleanly and end with: NEXT: [Continue].\nContinuation:\
  \ continue exactly from anchor; do not restart sections; do not summarize prematurely.\
  \ If nearing length limit, stop cleanly with: NEXT: [Continue]."
max_chunks: 2
continuation:
  mode: anchor
  minChars: 1200
  pushPasses: 1
  repeatWarn: true
io:
  output: file
  outPath: ./books/finals/anchors-next-smoke.final.md
===== END INCLUDED FILE: recipes/fast_anchors-next-smoke.yml =====

===== BEGIN INCLUDED FILE: recipes/fast_psychology-foundations-to-master-s-clinical-focus.yml =====
task: book.zero2hero
subject: Psychology — Foundations to Master's (Clinical Focus)
system_text: "Goal: pedagogical manual from foundations to practice with steady depth;\
  \ no early wrap-ups.\nLANGUAGE CONSTRAINTS\n- Plain, direct language; avoid pompous\
  \ terms and circumlocutions.\n- Prefer short sentences and concrete nouns/verbs.\n\
  - Remove throat‑clearing, meta commentary, and rhetorical filler.\nPEDAGOGY & NARRATIVE\
  \ OVERLAY\n- Tone: explanatory narrative with smooth trans
---TRUNCATED---
: only after definition; otherwise\
  \ add a 1-sentence inline gloss.\n- Keep mini-drills practical (identify, discriminate,\
  \ apply).\nContinuation: continue exactly from anchor; do not restart sections;\
  \ do not summarize prematurely. If nearing length limit, stop cleanly with: NEXT:\
  \ [Continue]."
max_chunks: 40
continuation:
  mode: anchor
  minChars: 6000
  pushPasses: 3
  repeatWarn: true
io:
  output: file
  outPath: ./books/finals/psychology-masters-clinical.narrative.final.md
===== END INCLUDED FILE: recipes/fast_psychology-foundations-to-master-s-clinical-focus.yml =====

===== BEGIN INCLUDED FILE: recipes/mastery.yml =====
task: book.zero2hero
subject: "Your Topic"
system_text: |
  {{file: directives/agent_quickref.md}}
prelude:
  - "/style.nobs on"
  - "/style.narrative on"
  - "/cont.mode anchor"
  - "/repeat.warn on"
io:
  output: file
  outPath: "./books/your-topic.final.md"
max_chunks: 12
continuation:
  mode: anchor
  minChars: 4200
  pushPasses: 1
  repeatWarn: true
===== END INCLUDED FILE: recipes/mastery.yml =====

===== BEGIN INCLUDED FILE: recipes/mixer_modern-political-history-of-britain-elections-and-power-c-1832-present.yml =====
task: book.zero2hero
subject: "Modern Political History of Britain — Elections and Power (c. 1832–present)"
system_text: |
  Goal: pedagogical manual from foundations to practice; no early wrap-ups.
  LANGUAGE CONSTRAINTS
  - Plain, direct language; avoid pompous terms and circumlocutions.
  - Prefer short sentences and concrete nouns/verbs.
  - Remove throat‑clearing, meta commentary, and rhetorical filler.
  COMPRESSED NARRATIVE OVERLAY
  - Style: compressed narrative prose; minimal head
---TRUNCATED---
 stuffing.
  - Use generic fact patterns if you can't cite precisely. Educational,
    not legal advice.
  - If near length limit, stop cleanly and end with: NEXT: [Continue].
  Continuation: continue exactly from anchor; do not restart; do not summarize prematurely. If near limit, stop with: NEXT: [Continue].
io:
  output: file
  outPath: "./books/modern-britain-political-history.elections.final.md"
max_chunks: 14
continuation:
  mode: anchor
  minChars: 4800
  pushPasses: 2
  repeatWarn: true
===== END INCLUDED FILE: recipes/mixer_modern-political-history-of-britain-elections-and-power-c-1832-present.yml =====

===== BEGIN INCLUDED FILE: recipes/mixer_quick-test.yml =====
# Generated by xsarena mix
task: book.nobs
subject: "Quick Test"
system_text: |
  Goal: no‑bullshit manual; only what changes decisions or understanding; tight prose.
  LANGUAGE CONSTRAINTS
  - Plain, direct language; avoid pompous terms and circumlocutions.
  - Prefer short sentences and concrete nouns/verbs.
  - Remove throat‑clearing, meta commentary, and rhetorical filler.
  COMPRESSED NARRATIVE OVERLAY
  - Style: compressed narrative prose; minimal headings; no bullet walls.
  - Teach-b
---TRUNCATED---
yword stuffing.
  - Use generic fact patterns if you can't cite precisely. Educational,
    not legal advice.
  - If near length limit, stop cleanly and end with: NEXT: [Continue].
  Continuation: continue exactly from anchor; do not restart sections; do not summarize prematurely. If nearing length limit, stop cleanly with: NEXT: [Continue].
io:
  output: file
  outPath: "./books/quick-test.final.md"
max_chunks: 12
continuation:
  mode: anchor
  minChars: 4200
  pushPasses: 1
  repeatWarn: true
===== END INCLUDED FILE: recipes/mixer_quick-test.yml =====

===== BEGIN INCLUDED FILE: recipes/mixer_test-subject.yml =====
# Generated by xsarena mix
task: book.zero2hero
subject: "Test Subject"
system_text: |
  Goal: pedagogical manual from foundations to practice with steady depth; no early wrap-ups.
  LANGUAGE CONSTRAINTS
  - Plain, direct language; avoid pompous terms and circumlocutions.
  - Prefer short sentences and concrete nouns/verbs.
  - Remove throat‑clearing, meta commentary, and rhetorical filler.
  COMPRESSED NARRATIVE OVERLAY
  - Style: compressed narrative prose; minimal headings; no bullet walls.
---TRUNCATED---
ord stuffing.
  - Use generic fact patterns if you can't cite precisely. Educational,
    not legal advice.
  - If near length limit, stop cleanly and end with: NEXT: [Continue].
  Continuation: continue exactly from anchor; do not restart sections; do not summarize prematurely. If nearing length limit, stop cleanly with: NEXT: [Continue].
io:
  output: file
  outPath: "./books/test-subject.final.md"
max_chunks: 12
continuation:
  mode: anchor
  minChars: 4200
  pushPasses: 1
  repeatWarn: true
===== END INCLUDED FILE: recipes/mixer_test-subject.yml =====

===== BEGIN INCLUDED FILE: recipes/psychology_masters_clinical.yml =====
task: book.zero2hero
subject: "Psychology — Foundations to Master's (clinical nudge)"
system_text: |
  Psychology — Plain, Compressed, Neutral Narrative (Self‑Study to Master's) with a Clinical Nudge

  Purpose
  - Produce a compact, continuous narrative of psychology from foundations to the level expected in a typical master's program.
  - Use human, straightforward language in tight paragraphs. Neutral point of view. No rhetorical questions, no hype.
  - Teach‑before‑use: define any
---TRUNCATED---
 should be able to explain and do (conceptual design, measurement reasoning, interpretation, limits), and how clinical knowledge integrates with general psychology without dominating it.
prelude:
  - "/style.narrative off"
  - "/style.compressed on"
  - "/cont.mode anchor"
  - "/repeat.warn on"
  - "/out.budget on"
io:
  output: file
  outPath: "./books/psychology.masters.clinical-nudge.compressed.md"
max_chunks: 16
continuation:
  mode: anchor
  minChars: 4800
  pushPasses: 2
  repeatWarn: true
===== END INCLUDED FILE: recipes/psychology_masters_clinical.yml =====

===== BEGIN INCLUDED FILE: recipes/role_launcher.yml =====
task: answer.role
subject: "Role-Based Analysis"
system_text: |
  You are an expert in role-based analysis and content creation.
  The user will specify which role to use from the available options.
  Available roles are documented in directives/role_launcher.md
prelude:
  - "/style.nobs on"
  - "/style.narrative on"
io:
  output: file
  outPath: "./books/role_analysis.out.md"
max_chunks: 1
# Usage: After launching, specify which role you want to use, then provide your topic
===== END INCLUDED FILE: recipes/role_launcher.yml =====

===== BEGIN INCLUDED FILE: scripts/gen_docs.sh =====
#!/bin/bash
echo "Generating CLI help documentation..."
xsarena --help > docs/_help_root.txt || true
xsarena service --help > docs/_help_serve.txt || true
xsarena snapshot --help > docs/_help_snapshot.txt || true
xsarena jobs --help > docs/_help_jobs.txt || true
xsarena doctor --help > docs/_help_doctor.txt || true
xsarena book --help > docs/_help_z2h.txt || true
xsarena interactive --help > docs/_help_interactive.txt || true
echo "Done."
===== END INCLUDED FILE: scripts/gen_docs.sh =====

===== BEGIN INCLUDED FILE: scripts/sync_pass.sh =====
#!/usr/bin/env bash
set -euo pipefail
mkdir -p .sync docs/_help_cache
# 1) top-level scan
timeout 10s bash -lc 'find . -maxdepth 1 -mindepth 1 \( -type d -o -type f \) | sed "s#^\\./##" | sort > .sync/_top.txt'
echo "[sync] top-level list → .sync/_top.txt"
# 2) help scrape (for README drift)
timeout 60s xsarena --help | tee docs/_help_root.txt >/dev/null || true
# Extract subcommands (best-effort):
awk '/Commands:/,0' docs/_help_root.txt | sed '1d' | awk '{print $1}' | sed 's/[:]$//' | sort -u
---TRUNCATED---
ld include: .git, __pycache__, books, dist, build, node_modules, snapshot_chunks, .xsarena (except SNAPSHOT+JOBS)."
# 5) docs index presence (print missing)
for f in README.md CLI_AGENT_RULES.md docs/SHORTCUTS.md docs/RUNBOOKS.md docs/SNAPSHOT_POLICY.md docs/TROUBLESHOOTING.md docs/AGENT_JOURNAL.md docs/HANDOFF.md docs/INBOX.md docs/OUTBOX.md docs/PROFILES.md DEPRECATIONS.md; do
  [[ -e "$f" ]] || echo "[sync] missing doc: $f"
done
echo "[sync] Done. Review proposals and apply with your rules."
===== END INCLUDED FILE: scripts/sync_pass.sh =====

===== BEGIN INCLUDED FILE: tools/situation_report.py =====
#!/usr/bin/env python3
"""
situation_report.py — Single-file situation report + 120KB chunking for XSArena.

What it does (read-only):
- Builds a self-contained text report (tree + LS + rules digest + config/session + recipes + books samples + review signals + jobs summary + code manifest).
- Updates a machine-readable "important files" list based on docs and a live tree pass, then ensures those files are inlined (bounded) in the report.
- Health-checks inclusion: required sections + presence
---TRUNCATED---
rint("\nQuestions for operator:")
    print(
        "1) Do you want additional directories included in TREE/LS (e.g., docs, tools, scripts)?"
    )
    print(
        "2) Should ephemeral XSA-EPHEMERAL files be included next time? (--include-ephemeral)"
    )
    print("3) Is 120KB chunk size acceptable, or adjust via --chunk-bytes?")
    print(
        "4) Did the report capture all important files you expect? If not, list paths to add."
    )


if __name__ == "__main__":
    sys.exit(main())
===== END INCLUDED FILE: tools/situation_report.py =====

===== BEGIN INCLUDED FILE: xsarena_bridge.user.js =====
// ==UserScript==
// @name         XSArena Bridge (CSP-safe polling, no fetch override)
// @namespace    [REDACTED_URL]
// @version      0.4
// @description  Poll local CLI via GM_xmlhttpRequest, capture IDs via PerformanceObserver, stream chunks back.
// @match        [REDACTED_URL]
// @match        [REDACTED_URL]
// @grant        GM_xmlhttpRequest
// @connect      [REDACTED_IP]
// @connect      localhost
// @run-at       document-end
// ==/UserScript==

(function () {
  'us
---TRUNCATED---
der.read();
        if (done) break;
        gmPost("/bridge/push", { request_id: requestId, data: dec.decode(value) });
      }
      gmPost("/bridge/push", { request_id: requestId, data: "[DONE]" });
    } catch (e) {
      console.error("[MinimalBridge] job error:", e);
      gmPost("/bridge/push", { request_id: requestId, data: { error: e.message || String(e) } });
    }
  }

  console.log("[MinimalBridge] CSP-safe polling bridge starting…");
  startPoll();
  startResourceObserver();
})();
===== END INCLUDED FILE: xsarena_bridge.user.js =====

===== END IMPORTANT FILES (INLINE) =====

===== MANIFEST (CODE) =====
src/xsarena/__init__.py  c3e44fa67455a7bef9698b89d4f71b2228c64f2c2ac71e1e4b91c742419cf4c7
src/xsarena/__main__.py  65acfcd79056ab519e0a771e99b07698aeecc560ec6252e848d163892afe0414
src/xsarena/bridge_v2/__init__.py  e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
src/xsarena/bridge_v2/api_server.py  3518f90537edfc1cdba8c73aef96bedadd1a78938e3bbe6a6e4e4581dceb63e0
src/xsarena/cli/__init__.py  e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
src/xsarena/cli/cmds_adapt.py  e133372f54ffa244207ffc4866329a4420e403593e6a1957bb264031bd151195
src/xsarena/cli/cmds_agent.py  eba2a9fa9c79d9229de6a020bf83fd7b88c95ef0e3c1a01828c8849e2705c4a6
src/xsarena/cli/cmds_audio.py  0425f10c3e5e34dd5b5f9fcc3ec1e359e23021bedd8dfef253d070198c3f0226
src/xsarena/cli/cmds_backend.py  c8ab388ef221e17e9f92ea200d0aa05fee302366370acedfbf4bb0fd3c83c6cb
src/xsarena/cli/cmds_bilingual.py  95af8095c6753640bb67c9e8d77b1caf30e352a2a76460919cb7d041212c7b03
src/xsarena/cli/cmds_book.py  7afb4c8e787f57efc4d45631437a6f5e4af91cf0fdef3350089e4efa4c31b68b
src/xsarena/cli/cmds_booster.py  892c65f26e17550941e59c26926d0dbb4b76e6ed06f9ff649d01dd57016e1515
src/xsarena/cli/cmds_boot.py  26e58f81b9aac6b18177824e71943ed183c6f2f8202d965357267d68bf16011d
src/xsarena/cli/cmds_chad.py  78ad59a842a9e850f6c8545ee955c492fb70a65a5664b29918c64b04acc5c7c2
src/xsarena/cli/cmds_checklist.py  53014ff17d30310e064c20b6517c0ca173b1cece8e0fe7f16fd78d46407d5436
src/xsarena/cli/cmds_clean.py  9c2a5021540dfb8e66ca84dcbf4de07eba274c5e1255240088aa874860fee547
src/xsarena/cli/cmds_coach.py  1fa60cd6ee8ff93e1df3c8b7d68926bb54c89254e69798f492cb0ade45eaa934
src/xsarena/cli/cmds_coder.py  132449cb95c1073cea8198dea4dde39d73da9ba085fd3f7e907c1885b6e175e4
src/xsarena/cli/cmds_config.py  7556216abd3ceb167fea88bad0e43cc1d9668f3c8966a62edb670c8df2cf1537
src/xsarena/cli/cmds_control.py  9e7877a3200e5125959cfd4d3267680129bad0bc54e2295a4a7f258244e9e9bd
src/xsarena/cli/cmds_controls.py  a58a3ffab219db564150e9a44c5d1e005a38cbfef94684028429eae590433d07
src/xsarena/cli/cmds_debug.py  be059c9ca087db20f5e5ed3759386132c2afcb053cb2f730bd3a5269c712a891
src/xsarena/cli/cmds_deprecated.py  2e87f9f0300c5211a0bcdb10894cb0a01d3a0c2eb83f218b6244d7c48aea690a
src/xsarena/cli/cmds_doctor.py  e9c133530e1fae8fb7f900aaa6af7ccad59fe50fa38175d226a20cf61edf9bd2
src/xsarena/cli/cmds_fix.py  7c167246e41d2f41d441e26b6233c0beafa8faaad20a5664cf9783c39b008ecd
src/xsarena/cli/cmds_ingest.py  4f968466e062b26eb1fc79181511a270a83dba19c094aaf3d2d78a41939fe401
src/xsarena/cli/cmds_interactive.py  67dc9792b73d65a44df4e4d85556f18da7bb04f734b36fc4996a4db4b39a6461
src/xsarena/cli/cmds_jobs.py  a7711957de6a458b585baaed81fd2f70e098bc28d2ffeb3e488abe5cd25e9d7d
src/xsarena/cli/cmds_joy.py  9ac138877403ec73fec64ab18a963879841b5137077ff2e2fc3eeb2df748e9c3
src/xsarena/cli/cmds_lossless.py  fb360515b72871f99d988a4ef598680f29f1bc086985ca14c95f4f1910db8efb
src/xsarena/cli/cmds_macros.py  7972969bd30f3ba89b40375edeecfc12ccc220aaded83bb4233d9bdb5181636f
src/xsarena/cli/cmds_metrics.py  cd5834858d53d110af63b242bbec00ea6a5695129ab224628b8dd097d5592817
src/xsarena/cli/cmds_modes.py  7e6c3df69b8624269ec2d1651e3422aaaaeecd6061a53eba05eae8a953af56ba
src/xsarena/cli/cmds_people.py  5f0ae7a101dcab915fdb9f3b79fc7c4c2bcd04348945fb78c05733f4a5e458bf
src/xsarena/cli/cmds_pipeline.py  8807e1ffcd3c180449fd835d62e0581a811a36b0eac0054921836c3c90661619
src/xsarena/cli/cmds_playground.py  f02f213ae427505d37bb2b1bc60dc3db64fb6f9f7de34be2046214c07d630255
src/xsarena/cli/cmds_policy.py  af08fc4d3078f80a60a4604f039ca833ad26832a366a65db72f57d570218a00c
src/xsarena/cli/cmds_preview.py  49faa878cd5f6921ab45a066ccb59786dea915e6f8d19d92bee12b3270b81101
src/xsarena/cli/cmds_profiles.py  db074557853b5a41beb580e78b259d1c8742bf4b601ab925a9ef959d9c78862a
src/xsarena/cli/cmds_project.py  a6f429e5bbd5f219daa13757fe1b5298639a993f4c28e7a866aa546600305d1e
src/xsarena/cli/cmds_prompt.py  4d2de2ab5956c8a738af48205f0058bbdb984ec89783e5bd5c2052ab15fb7b7b
src/xsarena/cli/cmds_publish.py  e8902840a8760b7940bae6f02b16d16b58d8723435c1b530632bc8a9390d036e
src/xsarena/cli/cmds_report.py  39813061f8408e2fac12fbc69864d47cf5e25218238ae2cd9c31c04e7b8c3fa2
src/xsarena/cli/cmds_run.py  dc90f429a3b17437a5d5c916f731580be632a2c707e93e9df26507175a06e80d
src/xsarena/cli/cmds_snapshot.py  37c7a57ebb86ef8a9a40207f8fc7c2d648297c4ba257fdc1c247554016522370
src/xsarena/cli/cmds_study.py  248759c1e5e14104d722f3eef6cd5bce0568034706b1f1afb6022f88e101a944
src/xsarena/cli/cmds_style.py  23beeb6bedf5b3b8eb386fb980183be92df69d349d2d8b91d1ddb80915e746d1
src/xsarena/cli/cmds_tools.py  ddbea5afa79a07f102243c7863fc6f0c3bb3a477aaef284a8c272d97eb3ef4b6
src/xsarena/cli/cmds_upgrade.py  d671c932b0f264926f16447132559e3e1890a75bf7b187ae29676f48faa7b264
src/xsarena/cli/context.py  35478dfe51e331d8a5f914b798a014d17cc0388b9077cd0ef52091751843b9c2
src/xsarena/cli/interactive_session.py  dcf37aab4009d134929ebeb0dbe691010b59a3d6d25d5e85e8cf08cf382a01e0
src/xsarena/cli/main.py  de6fcc1f5ba18a3711d99f26fab9594172fb712a93d0bd0a28f7b1236ce035ce
src/xsarena/cli/service.py  c06e7b2185a428f2d6c8402f3691c886c4e12ecd15444143a5a0a99201d95223
src/xsarena/coder/__init__.py  c6af87abe14f47bc9ca7897c6dde0cf698853f50d9e6cc6de5aef5b341329dab
src/xsarena/coder/gitops.py  b0baba93b88fed8365dbc5217ca13b3a167b9aa8a8f9178f9af829ab5d4b4bdf
src/xsarena/coder/search.py  82d676476d42269019bd11a778e9c1d448a64440bea46602b4ced28a78ee0303
src/xsarena/coder/session.py  651728ecfea8dc3bebf9bbd57350e639499e6621ef31696077bec9c369c4ead5
src/xsarena/coder/tests.py  6b046cc2de41f0c6c3c64fb55f17af8d65a9e92bae485734d08831880d760216
src/xsarena/core/__init__.py  587ba57a918e4f78c4970d6a0779157a4cf64905d020c226d4647a44c74ce5d1
src/xsarena/core/artifacts.py  d786471fe1540c4051ea72da64b670b279d7bc3bea8c0e735f37ecd52e200c5b
src/xsarena/core/autopilot/__init__.py  967d0711d629fa6b5a16ec92fb0c032a8011d02ca23966e5381fcbd7d88efbef
src/xsarena/core/autopilot/fsm.py  ebe7a77059f05425e27ce379f8aade8044ebe9004f7688caa68b62ebdeb56947
src/xsarena/core/backends/__init__.py  424eef89966a7b12d658ed06b4ac0b1445afcd5e42456540eff9f013fd793b21
src/xsarena/core/backends/bridge_v2.py  b652dad81b35f7289d358730bac918363b54869a8bb1bbb604cfcd26ac16f612
src/xsarena/core/backends/transport.py  e76ff40212e28dad34b6b168dbfdf0deb21dd39ac6728477e705a645f2485f98
src/xsarena/core/chunking.py  cc91ab23af63a77fe640f18c265c2839e1785bd00b97570debfc47eee3f822bc
src/xsarena/core/config.py  5f55fd199e0e70b265de1079a9c9ae6e8a3db18fdee6eddd6ee66805d4940e36
src/xsarena/core/engine.py  5fa53e5d78bee71ec6fcb1326858da534cd65faaceb3fc4cfbadfb9668c608e0
src/xsarena/core/jobs/__init__.py  e79165b145d2151da9fe5459d09c5b9e3bf8c4ecf7528c02b9ca4c2c9f7c630b
src/xsarena/core/jobs/model.py  853f94a7a83609abec2a9ed316e56bd9e2262e5c1eb7356193d59fe08087b404
src/xsarena/core/jobs/scheduler.py  b68ffe810c3c110e30f9896e3645c3bcb5560e4cbb2b1407b4fff8defe879873
src/xsarena/core/joy.py  7f801147292147429bf62a2a063cc028966b28a5c965444d13d691e927facfc9
src/xsarena/core/jsonio.py  0ac9b038ca4af03c11307363d7c1ce234579c30915f67c8abde31d5849ee8e1a
src/xsarena/core/pipeline.py  a21d43d6cd9cb4c2925763995d4037f5118b8beda22689c55fdf3f7da902a0cd
src/xsarena/core/profiles.py  745664805e936f9f7bc8ce5205ec09f806590b068f1cc496013eb89e444a5272
src/xsarena/core/prompt.py  37b1d026efa18399b7b0ca288d48c9304ecf209855d60d860fd0fa2e4f89cf82
src/xsarena/core/recipes.py  aca4986c9f7c734f1b318a9705d9a1292425566641842de5cfb434629a230296
src/xsarena/core/redact.py  e346fbf8c3ced6d0eb1460dd9868059836d8ec8992921886e6f4378542785985
src/xsarena/core/roleplay.py  58a36a428be257a92f7e754e4410a35abe8bdb9d248a4bdb71b7cb5e064976c7
src/xsarena/core/specs.py  4757033d2f4da68131e8f33f5270bdab852745b4aac93fabd26a8f6ec3d0dea1
src/xsarena/core/state.py  c2a0954acb93f73faf003e064c2cc3409f8187f159b8e76eb1c7486ea8254c0c
src/xsarena/core/templates.py  e8f1e68b8ae8cd84c2740915b7a6525ce53464c7bf2d810089c7b08cb868db66
src/xsarena/core/tools.py  72d1b7965058fd8a63c1e1e6ebf5932c863613ef9718a72e13e1c7c491d546e2
src/xsarena/core/v2_orchestrator/__init__.py  059df0969d7f2caba57054834e991e985b4449b8620e81479352b9a7dc1ca809
src/xsarena/core/v2_orchestrator/orchestrator.py  b6438ea5b390cb0f72f36f42c7dc5f5804422bda2b9003b72c9d631e1604e217
src/xsarena/core/v2_orchestrator/specs.py  d183fe9d7feac392437370457d01d3a5f79bb5f89f2285a307a1fcbdbad0d0c4
src/xsarena/modes/__init__.py  19bf2be773dfa5872f487cdd56415aefaad03c3e5e55acb54479d160b06d4785
src/xsarena/modes/bilingual.py  0df13de55d783d149939b47a149007df4bd9d820dd9331566d065ea7ec64bab8
src/xsarena/modes/book.py  d8e0c4c981e6eb7cdb095605fcd5c8008443c7170bb6d0d621564251ae3fcb76
src/xsarena/modes/chad.py  4abebb114b205302f9c60609c5113b66689616c7cee05185797e315b48327139
src/xsarena/modes/coder.py  acb6c7918ad5d076c856cd1f58efe8836b7e1f8f5ace620d06089d4c90f77cb0
src/xsarena/modes/lossless.py  0d1f94c77ba5044ba7027eaf484a713a8a31f92df9cc37394703376f6b2bf5f4
src/xsarena/modes/policy.py  5daf21c6f3f25963a6539d8e20b18235da02c5466568bab0344ef3d51cba1d3b
src/xsarena/modes/study.py  119372a5d626aa4da1bc4a85068c99a30d85d59b477c5a5f0fa10dc8f647b989
src/xsarena/router/__init__.py  83e997d3ef697116f7fe13584568a0db881d6bbf61b1f8fd88f8a1c82d3f3859
src/xsarena/utils/__init__.py  e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855
src/xsarena/utils/metrics.py  4636238d59f0564049d5c0bbbd297a5dde53660b60791c797ebb88133cbe4717
===== SNAPSHOT DIGEST: 5a9419e166edf711a8ff28247b33eb0fc7fa89172703919ca350f9097b4bb3a1 =====

===== HEALTH SUMMARY (see .health.md for details) =====
Important files listed: 35
See companion health file for section presence and manifest counts.
Answer received. Do nothing else
